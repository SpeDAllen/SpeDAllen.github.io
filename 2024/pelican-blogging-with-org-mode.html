
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="author" content="public" />
        <meta name="description" content="Pelican blogging with Org mode Setting up this blog GitHub pages GitHub will host your static web pages for you even on a free account making it rather ideal for a blog hosting platform. Pelican But before setting anything up in GitHub you should decide on your tooling. There are …" />

<!-- Open Graph tags -->
<meta property="og:site_name" content=""My new blog""/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Pelican blogging with Org mode"/>
    <meta property="og:url" content="/2024/pelican-blogging-with-org-mode.html"/>
    <meta property="og:description" content="Pelican blogging with Org mode Setting up this blog GitHub pages GitHub will host your static web pages for you even on a free account making it rather ideal for a blog hosting platform. Pelican But before setting anything up in GitHub you should decide on your tooling. There are …"/>
    <meta property="article:published_time" content="2024-05-09" />
    <meta property="article:section" content="blog" />
        <meta property="article:author" content="public" />

    <title>Pelican blogging with Org mode - "My new blog"</title>

        <link rel="stylesheet" href="/theme/css/bootstrap.lumen.min.css" type="text/css"/>

    <link href="/theme/css/font-awesome.min.css" rel="stylesheet" />
    <link href="/theme/css/pygments/native.css" rel="stylesheet" />
    
    <link href="/theme/css/pelican-twitchy.min.css" rel="stylesheet" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Feeds -->
</head>
<body data-spy="scroll" data-target="#scrollspy">
    <div id="wrapper">
        <!-- Sidebar -->
        <div id="sidebar-wrapper-small" class="twitchy-background">
            <ul id="accordion-small" class="sidebar-nav sidebar-nav-small">
                <li>
        <a href="" title=""My new blog"" class="collapsed">
            <span class="glyphicon glyphicon-home"></span>
        </a>
    </li>
                <li class="nav-divider"></li>
                <li>
        <a href="/archives.html" title="Recent Articles" class="collapsed">
            <span class="glyphicon glyphicon-th-list"></span>
        </a>
    </li>
                
                <li class="nav-divider"></li>
                <li>
        <a href="#" title="Back to top" class="collapsed">
            <span class="fa fa-arrow-up"></span>
        </a>
    </li>
            </ul>
        </div>
        <div id="sidebar-wrapper" class="twitchy-background">
            <ul id="accordion" class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="/">
                            <span class="glyphicon glyphicon-home padding-small"></span>
                            "My new blog"
                    </a>
                </li>
                    <li class="nav-divider"></li>
                    <li>
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse-latest">
                            <span class="glyphicon glyphicon-th-list padding-small"></span>
                            Recent Articles
                        </a>
                    </li>
                    <li class="panel anti-panel"><ul id="collapse-latest" class="sidebar_submenu collapse in">
                        <li class="">
                            <a class="hide-overflow" href="/2024/create-a-useful-development-shell.html" title="Create a useful development shell">
                                <i class="fa fa-file-text padding-small"></i>
                                Create a useful development shell
                            </a>
                        </li>
                        <li class="active">
                            <a class="hide-overflow" href="/2024/pelican-blogging-with-org-mode.html" title="Pelican blogging with Org mode">
                                <i class="fa fa-file-text padding-small"></i>
                                Pelican blogging with Org mode
                            </a>
                        </li>
                    <li>
                        <a href="/archives.html">
                            <i class="fa fa-arrow-right padding-small"></i>
                            More
                        </a>
                    </li>
                    </ul></li>
                
                <li class="nav-divider"></li>
                <li>
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapse-pages">
                        <i class="fa fa-folder-open padding-small"></i>
                        Pages
                    </a>
                </li>
                <li class="panel anti-panel"><ul id="collapse-pages" class="sidebar_submenu collapse ">
                </ul></li>
                
                <li class="nav-divider"></li>
                <li>
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapse-categories">
                        <i class="fa fa-folder-open padding-small"></i>
                        Categories
                    </a>
                </li>
                <li class="panel anti-panel"><ul id="collapse-categories" class="sidebar_submenu collapse ">
                    <li class="active">
                        <a href="/category/blog.html">
                            <i class="fa fa-folder-open padding-small"></i>
                            blog
                            <span class="badge pull-right categorybadge">2</span>
                        </a>
                    </li>
                </ul></li>
                
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->
        <!-- open/close sidebar -->
        <a href="#menu-toggle" class="btn btn-default" id="menu-toggle">
            <span id="right-arrow" class="glyphicon glyphicon-chevron-right"  title="expand sidebar"></span>
            <span id="left-arrow" class="glyphicon glyphicon-chevron-left" title="minimize sidebar"></span>
        </a>
       <!-- /open/close sidebar -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
<section id="content">
    <article>
        <div class="row">
            <div class="col-lg-9">
                <header class="page-header">
                    <h1>
                        <a href="/2024/pelican-blogging-with-org-mode.html"
                           rel="bookmark"
                           title="Permalink to Pelican blogging with Org mode">
                            Pelican blogging with Org mode
                        </a>
                        <small>
<div class="post-info">
    <div class="publish-info-block">
        <small>
            <span class="published">
                <i class="fa fa-calendar padding-small"></i><time datetime="2024-05-09T21:34:43.997881+02:00"> do 09 mei 2024</time>
            </span>
            <span class="category">
                <i class="fa fa-folder-open padding-small"></i><a href="/category/blog.html">blog</a>
            </span>
        </small>
    </div>
</div><!-- /.post-info -->                        </small>
                    </h1>
                </header>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-9">
                <div class="entry-content">
                    
<div id="content" class="content">
<h1 class="title">Pelican blogging with Org mode</h1>

<div id="outline-container-orgb41e4cb" class="outline-2">
<h2 id="orgb41e4cb">Setting up this blog</h2>
<div class="outline-text-2" id="text-orgb41e4cb">
</div>
<div id="outline-container-orge575d06" class="outline-3">
<h3 id="orge575d06">GitHub pages</h3>
<div class="outline-text-3" id="text-orge575d06">
<p>
GitHub will host your static web pages for you even on a free account making it rather ideal for a blog hosting platform.
</p>
</div>
</div>
<div id="outline-container-org5eb4463" class="outline-3">
<h3 id="org5eb4463">Pelican</h3>
<div class="outline-text-3" id="text-org5eb4463">
<p>
But before setting anything up in GitHub you should decide on your tooling. There are several site generators freely available with <a href="https://jekyllrb.com/">Jenkyll</a> probably being the most popular. I initially was going to use <a href="https://jekyllrb.com/">Jenkyll</a> but after noticing it's license I decided to look for alternatives. <a href="https://www.sitepoint.com/6-static-blog-generators-arent-jekyll/">Using this article</a> I found Pelican which is licensed with AGPL which I feel offers more protection from open source exploitation. 
</p>
</div>
</div>
<div id="outline-container-org113b3d4" class="outline-3">
<h3 id="org113b3d4">Git started</h3>
<div class="outline-text-3" id="text-org113b3d4">
<p>
With my tooling and hosting platform decided upon I followed this <a href="https://fedoramagazine.org/make-github-pages-blog-with-pelican/">Fedoria magazine article</a> to setup the basic Git structure. I use NixOs so not every applies to me but it was very helpful. They casually mention initializing your source repository with a readme but I found out the hard way that it's better to initialize it with a python .gitignore file.
</p>
</div>
</div>
<div id="outline-container-org6e79d8b" class="outline-3">
<h3 id="org6e79d8b">Dev environment</h3>
<div class="outline-text-3" id="text-org6e79d8b">
<p>
With a place to store and track my progress setup it was time to install the tools. I started with setting up a flake that I could use to version control the software used. It's not complicated if your accustomed to flakes.
</p>
<div class="org-src-container">
<pre class="src src-nix">
{
  <span style="color: #ffcb6b;">description</span> = <span style="color: #c3e88d;">"blog"</span>;
  <span style="color: #ffcb6b;">inputs</span> =
    {
      <span style="color: #ffcb6b;">nixpkgs.url</span> = <span style="color: #c3e88d;">"github:nixos/nixpkgs/23.11"</span>;
     };
  <span style="color: #ffcb6b;">outputs</span> = { self, nixpkgs }:
    <span style="color: #89DDFF;">let</span>
      <span style="color: #ffcb6b;">system</span> = <span style="color: #c3e88d;">"x86_64-linux"</span>;
      <span style="color: #ffcb6b;">pkgs</span> = nixpkgs.legacyPackages.${system};
    <span style="color: #89DDFF;">in</span>
    {
      <span style="color: #ffcb6b;">devShells.x86_64-linux.default</span> = ( <span style="color: #82aaff;">import</span> <span style="color: #f78c6c;">./shell.nix</span> { <span style="color: #89DDFF;">inherit</span> pkgs; });
    };
}
</pre>
</div>
<p>
Basically you specify your sources and where you want to use them and Nix takes care of the rest. The Nix shell was surprisingly simple after a lot of trial and error due to my inexperience using them this way.
</p>
<div class="org-src-container">
<pre class="src src-nix">
{ pkgs ? <span style="color: #82aaff;">import</span> <span style="color: #f78c6c;">&lt;nixpkgs&gt;</span> { } }:
pkgs.mkShell
  {
    <span style="color: #ffcb6b;">packages</span> = [
      (pkgs.python3.withPackages (python-pkgs: [
        python-pkgs.pelican
        python-pkgs.ghp-import
      ]))
      pkgs.emacs
      pkgs.emacsPackages.htmlize
      pkgs.emacsPackages.nix-mode
    ];
  }
</pre>
</div>
<p>
The emacs packages used here aren't necessary if you don't plan to use the org_reader Pelican plugin. If you want to write your blog using markdown or something else it can be safely omitted. Now to work on a blog post I only need to navigate to the source git repo in the command line and run.
</p>
<div class="org-src-container">
<pre class="src src-shell">
nix develop
make devserver
</pre>
</div>
<p>
That will process the source files and serve the sight at <a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a> while monitoring your sources for changes so you can view your blog as you work on it. Since it's a nix shell I need only exit for the tooling to be removed. And because it's in a flake it will be rebuilt identically the next time.
</p>
</div>
</div>
<div id="outline-container-orgf45db7b" class="outline-3">
<h3 id="orgf45db7b">Org mode blogging with Pelican</h3>
<div class="outline-text-3" id="text-orgf45db7b">
<p>
Out of the box Pelican doesn't support org documents as source but there are three plugins you can use.
</p>
</div>
<div id="outline-container-org5d93dc4" class="outline-4">
<h4 id="org5d93dc4">org_pandoc_reader</h4>
<div class="outline-text-4" id="text-org5d93dc4">
<p>
It appears to be very simple to use but it sadly hasn't been maintained. Requiring a very old version of python that's no longer available in the Nix packages.
</p>
</div>
</div>
<div id="outline-container-org28a5cd0" class="outline-4">
<h4 id="org28a5cd0">org_python_reader</h4>
<div class="outline-text-4" id="text-org28a5cd0">
<p>
Is newer but sadly one of it's dependencies pyton-orgco isn't packaged by nix yet.
</p>
</div>
</div>
<div id="outline-container-orgfccd125" class="outline-4">
<h4 id="orgfccd125">org_reader</h4>
<div class="outline-text-4" id="text-orgfccd125">
<p>
Is the most logical of the org plugins available requiring only emacs which you're probably using to author your org documents anyway. It needs to know the path to emacs which is complicated by running nix shell on NixOS.
</p>
</div>
</div>
</div>
<div id="outline-container-org06ffee4" class="outline-3">
<h3 id="org06ffee4">Installing and configuring org_reader</h3>
<div class="outline-text-3" id="text-org06ffee4">
<p>
I chose to add the pelican plugins repo as a git submodule to keep everything contained and make my paths simple. It's may not be the best solution but since I already have a submodule for the output why not add more? Per the plugins documentation I only needed to tell Pelican where to find the plugins and define what to use.
</p>
<div class="org-src-container">
<pre class="src src-python">
<span style="color: #ffcb6b;">PLUGIN_PATHS</span> = [<span style="color: #c3e88d;">'./pelican-plugins'</span>]
<span style="color: #ffcb6b;">PLUGINS</span> = [<span style="color: #c3e88d;">'org_reader'</span>]
</pre>
</div>
<p>
Telling org_reader where to find emacs in a nix shell dev environment was a bit more tricky. I settled on making the shell that installs emacs do it for me. Someday I may improve this bash with some simple if statements but it's enough to keep me moving forward. The property doesn't need to be added every time nix develop is called so once it did it's thing I commented it out leaving my shell.nix file looking like
</p>
<div class="org-src-container">
<pre class="src src-nix">
  { pkgs ? <span style="color: #82aaff;">import</span> <span style="color: #f78c6c;">&lt;nixpkgs&gt;</span> { } }:
pkgs.mkShell
  {
    <span style="color: #ffcb6b;">packages</span> = [
      (pkgs.python3.withPackages (python-pkgs: [
        python-pkgs.pelican
        python-pkgs.ghp-import
      ]))
      pkgs.emacs
      pkgs.emacsPackages.htmlize
      pkgs.emacsPackages.nix-mode
    ];
    <span style="color: #676E95;"># shellHook = ''</span>
    <span style="color: #676E95;">#   echo ORG_READER_EMACS_LOCATION = \'${pkgs.emacs}/bin/emacs\' &gt;&gt; ./pelicanconf.py</span>
    <span style="color: #676E95;"># '';</span>
  }
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org2423c1b" class="outline-2">
<h2 id="org2423c1b">Final thoughts</h2>
<div class="outline-text-2" id="text-org2423c1b">
<p>
There's work still to be done with the syntax highlighting some formatting I'd like to improve but that can be tomorrows problem.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2024-04-27 14:59</p>
<p class="author">Author: public</p>
<p class="date">Created: 2024-05-09 do 21:34</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>

                </div>
                <footer class="text-right">
                    <p>- public</p>
                </footer>
            </div>
        </div>
    </article>
</section>
<footer>
    <hr>
    <div class="row">
        <div class="col-lg-9 text-center">
            <p><small>
                Built by <a href="http://docs.getpelican.com/en/latest">Pelican</a> / <a href="https://github.com/ingwinlu/pelican-twitchy">pelican-twitchy</a>
                &middot;                    &copy; 2024 SpeDAllen
            </small></p>
        </div>
    </div>
</footer>            </div>
        </div>
        <!-- /#page-content-wrapper -->
    </div>
    <!-- /#wrapper -->
    <!-- jQuery Version 1.11.2 -->
    <script src="/theme/js/jquery-1.11.2.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="/theme/js/bootstrap.min.js"></script>
    <!-- twitchy Script -->
    <script src="/theme/js/pelican_twitchy.min.js"></script>

</body>
</html>